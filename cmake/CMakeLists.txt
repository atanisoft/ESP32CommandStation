# The following lines of boilerplate have to be in your project's
# CMakeLists in this exact order for cmake to work correctly
cmake_minimum_required(VERSION 3.5)

add_definitions(
  # this option should be used, but OpenMRN does not compile
  # unfortunately all the network functions are non-blocking/polling when
  # using the arduino interface
  #-D__FreeRTOS__    
  -DBUILTSYSTEM_CMAKE=1   # so we can check and include 'sdkconfig.h' generated by cmake/menuconfig
  -DESP32=1 
  -DARDUINO_ESP32_DEV 
  -DARDUINO=1 
  -DCONFIG_AUTOSTART_ARDUINO=1 
  -DCORE_DEBUG_LEVEL=ARDUHAL_LOG_LEVEL_INFO -g3
  -DMBEDTLS_KEY_EXCHANGE_PSK_ENABLED
)


#--------------------------------------------------------------------------------------
# include the arduino simulation layer as an extra component:
# git submodule add https://github.com/espressif/arduino-esp32.git; cd arduino-esp32; git submodule update --init --recursive
set(EXTRA_COMPONENT_DIRS 
  ${CMAKE_CURRENT_SOURCE_DIR}/syslib/arduino-esp32
)

#--------------------------------------------------------------------------------------
# now the 'standard' cmake code...
include($ENV{IDF_PATH}/tools/cmake/project.cmake)
project(ESP32CommandStation)





